{% comment %}
<div class="colloc-result">
  {% for key, value in syn_usage_dict.items %}
    <div {% if usageList|length == 1 %} class="hide-query" {% endif %}>
      <p><a href="#" class="colloc-usage" ref="{{ value.ref }}" lemma="{{ value.lemma }}">{{ value.content }}
        <span class="usage-count">{% if value.count >= 1000 %}({% widthratio value.count 1000 1 %}k)
        {% else %}({{ value.count }}){% endif %}</span></a></p>
    </div>
  {% endfor %}
  {% for key, value in syn_usage_dict.items %}
    <ul class="list-group">
      {% if value %}
        <div class="panel-subheading">{{ key }}
          <span class="list-btn loadMore">+</span>
          <span class="list-btn showLess">-</span>
        </div>
        {% for v in value %}
          {% if forloop.counter < 4 %}
            <li class="list-group-item"><a href="#" class="syn-item">{{ v.content }}</a></li>
          {% elif forloop.counter > 3 %}
            <li class="list-group-item listHide listExpand"><a href="#" class="syn-item">{{ v.content }}</a></li>
          {% endif %}
        {% endfor %}
      {% endif %}
    </ul>
  {% endfor %}
</div>
{% endcomment %}

<div class="collocation-panel">
<div class="panel-category-heading">
  <p><a href="#" class="colloc-usage" ref="{{ t_dt.0|cut:"*" }}" lemma="{{ t_dt.0|cut:"*" }}" >{{ type }}</a><span class="total-cnt">
    {% if count >= 1000 %}({% widthratio count 1000 1 %}k){% else %}({{ count }}){% endif %}</span></p>
    <div>
      <span class="exchange-icon"><i class="fa fa-exchange"></i></span>
      <span class="colloc-heading">搭配替换</span>
      {% if t_dt.0|cut:"*"|wordcount == 2 %}
        <span class="synFilter">包含扩展词<input type="checkbox" class="syn-filter"></span>
      {% endif %}
    </div>
</div>
<div class="colloc-result">
  {% for k in t_list %}
    {% for key, value in syn_usage_dict.items %}
      {% if k == key %}
        <ul class="list-group {% if t_dt.0|cut:"*"|wordcount <= 1 %}{% if t_dt.1 != '0' %}{% if k != '动词' and k != '宾语' and k != '介词' and k != '修饰'  and k != '被修饰词' and k != '主语' %}hidden{% endif %}{% endif %}{% endif %}">
          {% if value %}
            <div class="panel-subheading click">
              <span class="panel-key">{{ key }}</span>
              <span class="list-btn less"><i class="fa fas fa-angle-up"></i></span>
              <span class="list-btn more"><i class="fa fas fa-angle-down"></i></span>
            </div>
            {% for v in value %}
              <li class="list-group-item {% if t_dt.0|cut:"*"|wordcount > 1 %}{% if v.type != 1 %}not-syn hidden{% endif %}{% endif %}"><a href="#" class="colloc-usage" ref="{{ v.ref }}" lemma="{{ v.lemma }}">{{ v.content }}
                <span class="usage-count">{% if v.count >= 1000 %}({% widthratio v.count 1000 1 %}k)
                {% else %}({{ v.count }}){% endif %}</span></a></li>
            {% endfor %}
          {% endif %}
        </ul>
      {% endif %}
    {% endfor %}
  {% endfor %}
  <div class="collocation-hint">
    <h3>暂无可替换搭配。</h3>
    <div class="hint-content">
      <p>温馨提示：</p>
      <p>修改"个人领域"</p>
      <p>扩大搜索范围</p>
    </div>
  </div>
</div>

</div>

<script type="text/javascript">
  $('.click').click(function () {
    $(this).parents('.list-group').children('.list-group-item').toggleClass('listHide');
    // $(this).parents('.list-group').children('.defalt-item').hide();
    if ($(this).children('.less').css('display') == 'none') {
      $(this).children('.more').hide();
      $(this).children('.less').show();
    } else {
      $(this).children('.less').hide();
      $(this).children('.more').show();
    }
  });

  $('.syn-filter').click(function() {
    $('.not-syn').toggleClass('hidden');
    // $('.synFilter').toggleClass('synFiltered');
  });

  var str = document.getElementsByClassName('list-group')[0].innerText;
  if(str.trim().length === 0) {
    $(".collocation-hint").show();
  } else {
    $(".collocation-hint").hide();
  }
</script>
