{% comment %}
<div class="colloc-result">
  {% for key, value in syn_usage_dict.items %}
    <div {% if usageList|length == 1 %} class="hide-query" {% endif %}>
      <p><a href="#" class="colloc-usage" ref="{{ value.ref }}" lemma="{{ value.lemma }}">{{ value.content }}
        <span class="usage-count">{% if value.count >= 1000 %}({% widthratio value.count 1000 1 %}k)
        {% else %}({{ value.count }}){% endif %}</span></a></p>
    </div>
  {% endfor %}
  {% for key, value in syn_usage_dict.items %}
    <ul class="list-group">
      {% if value %}
        <div class="panel-subheading">{{ key }}
          <span class="list-btn loadMore">+</span>
          <span class="list-btn showLess">-</span>
        </div>
        {% for v in value %}
          {% if forloop.counter < 4 %}
            <li class="list-group-item"><a href="#" class="syn-item">{{ v.content }}</a></li>
          {% elif forloop.counter > 3 %}
            <li class="list-group-item listHide listExpand"><a href="#" class="syn-item">{{ v.content }}</a></li>
          {% endif %}
        {% endfor %}
      {% endif %}
    </ul>
  {% endfor %}
</div>
{% endcomment %}

<div class="collocation-panel">
<div class="panel-category-heading">
  <p><a href="#" class="colloc-usage" ref="{{ t_str }}" lemma="{{ t_str }}" >{{ type }}</a><span class="total-cnt">
   {% if count >= 1000 %}({% widthratio count 1000 1 %}k){% else %}({{ count }}){% endif %}</span></p>
   <span class="panel-icon glyphicon glyphicon-transfer"></span>
   <!-- <i class="fa fas fa-exchange-alt"></i> -->
   <span class="colloc-heading">搭配替换</span>
   <span class="synFilter">仅同义</span>
</div>
<div class="colloc-result">
  {% for k in t_list %}
    {% for key, value in syn_usage_dict.items %}
      {% if k == key %}
        <ul class="list-group">
          {% if value %}
            <div class="panel-subheading click">
              <span class="panel-key">{{ key }}</span>
              <span class="list-btn more"><i class="fa fas fa-angle-down"></i></span>
              <span class="list-btn less"><i class="fa fas fa-angle-up"></i></span>
            </div>
            {% for v in value %}
              {% if forloop.counter < 6 %}
                {% if v.type == 1 %}
                  <li class="list-group-item"><a href="#" class="colloc-usage" ref="{{ v.ref }}" lemma="{{ v.lemma }}">{{ v.content }}
                    <span class="usage-count">{% if v.count >= 1000 %}({% widthratio v.count 1000 1 %}k)
                    {% else %}({{ v.count }}){% endif %}</span></a></li>
                {% else %}
                  <li class="list-group-item not-syn"><a href="#" class="colloc-usage" ref="{{ v.ref }}" lemma="{{ v.lemma }}">{{ v.content }}
                    <span class="usage-count">{% if v.count >= 1000 %}({% widthratio v.count 1000 1 %}k)
                    {% else %}({{ v.count }}){% endif %}</span></a></li>
                {% endif %}
              {% elif forloop.counter > 5 %}
                {% if v.type == 1 %}
                  <li class="list-group-item listHide listExpand"><a href="#" class="colloc-usage" ref="{{ v.ref }}" lemma="{{ v.lemma }}">{{ v.content }}
                    <span class="usage-count">{% if v.count >= 1000 %}({% widthratio v.count 1000 1 %}k)
                    {% else %}({{ v.count }}){% endif %}</span></a></li>
                {% else %}
                  <li class="list-group-item listHide listExpand not-syn"><a href="#" class="colloc-usage" ref="{{ v.ref }}" lemma="{{ v.lemma }}">{{ v.content }}
                    <span class="usage-count">{% if v.count >= 1000 %}({% widthratio v.count 1000 1 %}k)
                    {% else %}({{ v.count }}){% endif %}</span></a></li>
                {% endif %}
              {% endif %}
            {% endfor %}
          {% endif %}
        </ul>
      {% endif %}
    {% endfor %}
  {% endfor %}
  <div class="collocation-hint">
    <h3>暂无可替换搭配。</h3>
    <div class="hint-content">
      <p>温馨提示：</p>
      <p>修改"个人领域"</p>
      <p>扩大搜索范围</p>
    </div>
  </div>
</div>

</div>

<script type="text/javascript">
  $('.click').click(function () {
    $(this).parents('.list-group').children('.listExpand').toggleClass('listHide');
    if ($(this).children('.less').css('display') == 'none') {
      $(this).children('.more').hide();
      $(this).children('.less').show();
    } else {
      $(this).children('.less').hide();
      $(this).children('.more').show();
    }
  });

  // $('.showLess').click(function () {
  //   console.log("see");
  //   $(this).parents('.list-group').children('.listExpand').toggleClass('listHide');
  //   $(this).children('.less').hide();
  //   $(this).children('.more').show();
  //   $(this).toggleClass('showLess');
  //   $(this).toggleClass('loadMore');
  // });

  $('.synFilter').click(function() {
    // console.log("syn");
    $('.not-syn').toggleClass('hidden');
    $('.synFilter').toggleClass('synFiltered');
  });

  var str = document.getElementsByClassName('list-group')[0].innerText;
  if(str == "") {
    $(".collocation-hint").show();
  } else {
    $(".collocation-hint").hide();
  }
</script>
